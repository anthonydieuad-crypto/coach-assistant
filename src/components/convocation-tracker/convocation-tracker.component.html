<div class="p-4 sm:p-6">
  <h2 class="text-2xl font-bold text-white mb-6">Bilan des Compétitions</h2>

  <div class="bg-slate-800/50 backdrop-blur-lg border border-white/10 rounded-lg shadow-lg overflow-x-auto">
    <table class="min-w-full divide-y divide-white/10">
      <thead class="bg-black/20">
        <tr>
          <th scope="col" class="sticky left-0 bg-slate-800/95 backdrop-blur-sm px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider z-10 w-48">
            Joueur
          </th>
          @for (event of competitionEvents(); track event.id) {
            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider whitespace-nowrap">
              <div class="flex flex-col items-center">
                <span class="font-bold">{{ event.title.replace('Plateau à ', '') }}</span>
                <span class="font-normal">{{ formatDate(event.date) }}</span>
                <span class="text-gray-400 font-light">{{ event.location }}</span>
                 @if (event.group) {
                  <span class="mt-1 text-xs font-semibold inline-block py-0.5 px-2 uppercase rounded-full bg-cyan-400/20 text-cyan-300">
                    {{ event.group }}
                  </span>
                }
              </div>
            </th>
          }
          <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">
            Total
          </th>
        </tr>
      </thead>
      <tbody class="divide-y divide-white/10">
        @for (playerStat of playerStats(); track playerStat.id) {
          <tr class="hover:bg-white/10">
            <td class="sticky left-0 bg-slate-800/95 backdrop-blur-sm px-4 py-4 whitespace-nowrap text-sm font-medium text-white z-10">
              {{ playerStat.firstName }} {{ playerStat.lastName }}
            </td>
            @for (event of competitionEvents(); track event.id) {
              <td class="px-4 py-4 whitespace-nowrap text-sm text-center">
                @if (isPlayerParticipant(playerStat, event)) {
                  <span class="text-green-400 font-bold text-lg">✓</span>
                }
              </td>
            }
            <td class="px-4 py-4 whitespace-nowrap text-sm text-center font-bold text-cyan-400">
              {{ playerStat.convocationCount }}
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>