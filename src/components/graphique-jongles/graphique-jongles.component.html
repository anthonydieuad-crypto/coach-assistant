
<div class="w-full overflow-x-auto bg-black/20 rounded-lg p-2">
  @if (historique.length > 0) {
    <svg [attr.viewBox]="'0 0 ' + largeur + ' ' + hauteur" class="max-w-full h-auto text-gray-300">
      <g [attr.transform]="'translate(' + marge.left + ',' + marge.top + ')'">
        <!-- Axes -->
        <line [attr.x1]="0" [attr.y1]="hauteurInterne" [attr.x2]="largeurInterne" [attr.y2]="hauteurInterne" stroke="currentColor" stroke-width="1" opacity="0.5"/>
        <line [attr.x1]="0" [attr.y1]="0" [attr.x2]="0" [attr.y2]="hauteurInterne" stroke="currentColor" stroke-width="1" opacity="0.5"/>

        <!-- Graduations Axe Y -->
        @for (graduation of graduationsAxeY(); track graduation.label) {
          <g [attr.transform]="'translate(0,' + graduation.y + ')'">
            <line [attr.x1]="-5" [attr.y1]="0" [attr.x2]="0" [attr.y2]="0" stroke="currentColor" stroke-width="1" opacity="0.5"/>
            <text [attr.x]="-10" dy="0.32em" text-anchor="end" class="text-xs fill-current">{{ graduation.label }}</text>
            <line [attr.x1]="0" [attr.y1]="0" [attr.x2]="largeurInterne" [attr.y2]="0" stroke="currentColor" stroke-width="0.5" stroke-dasharray="2,2" opacity="0.2"/>
          </g>
        }

        <!-- Graduations Axe X -->
        @for (graduation of graduationsAxeX(); track graduation.x) {
          <g [attr.transform]="'translate(' + graduation.x + ',' + hauteurInterne + ')'">
            <line [attr.x1]="0" [attr.y1]="0" [attr.x2]="0" [attr.y2]="5" stroke="currentColor" stroke-width="1" opacity="0.5"/>
            <text [attr.y]="20" text-anchor="middle" class="text-xs fill-current">{{ graduation.label }}</text>
          </g>
        }
        
        <!-- Ligne de données -->
        @if (cheminLigne()) {
          <path [attr.d]="cheminLigne()" fill="none" stroke="#f59e0b" stroke-width="2"/>
        }

        <!-- Points de données -->
        @for (cercle of cercles(); track cercle.cx + '-' + cercle.cy) {
          <g [attr.transform]="'translate(' + cercle.cx + ',' + cercle.cy + ')'" class="group">
            <circle r="4" fill="#f59e0b" class="transition-transform duration-200 group-hover:scale-125 cursor-pointer"/>
            <text y="-10" text-anchor="middle" class="text-xs fill-current font-bold opacity-0 transition-opacity duration-200 group-hover:opacity-100 pointer-events-none">{{ cercle.score }}</text>
          </g>
        }
      </g>
    </svg>
  } @else {
    <div class="flex items-center justify-center h-full bg-black/10 rounded-lg p-8 min-h-[250px]">
        <p class="text-gray-400 italic">Aucun historique de jongles pour afficher le graphique.</p>
    </div>
  }
</div>